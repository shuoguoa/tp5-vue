<?php

use think\migration\Migrator;

class AdminAuthRule extends Migrator
{
    public function change()
    {
        $table = $this->table('admin_auth_rule');
        $table->addColumn('pid', 'integer', ['default'=>0]);
        $table->addColumn('level', 'integer', ['default'=>0, 'limit'=>2]);
        $table->addColumn('name', 'string', ['limit'=>80, 'default'=>'']);
        $table->addColumn('title', 'string', ['limit'=>50, 'default'=>'']);
        $table->addColumn('type', 'boolean', ['default'=>1]);
        $table->addColumn('node_icon', 'string', ['limit'=>32, 'default'=>'']);
        $table->addColumn('class_icon', 'string', ['limit'=>32, 'default'=>'']);
        $table->addColumn('condition', 'string', ['limit'=>100, 'default'=>'']);
        $table->addColumn('is_display', 'boolean', ['default'=>1]);
        $table->addColumn('status', 'boolean', ['default'=>1]);
        $table->addColumn('sort', 'integer', ['limit'=>6, 'default'=>0]);
        $table->addColumn('create_time', 'integer', ['default'=>0]);
        $table->addColumn('update_time', 'integer', ['default'=>0]);

        $table->insert([
            [
                'id'=>1,
                'name'=>'admin',
                'title'=>'后台',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>0,
                'pid'=>0,
                'level'=>1,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>2,
                'name'=>'admin/index',
                'title'=>'首页',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>1,
                'level'=>2,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>3,
                'name'=>'admin/index/index',
                'title'=>'后台首页',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>0,
                'pid'=>2,
                'level'=>3,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>4,
                'name'=>'admin/home',
                'title'=>'欢迎页',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>0,
                'pid'=>3,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>5,
                'name'=>'admin/system',
                'title'=>'系统',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>2,
                'pid'=>1,
                'level'=>2,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>6,
                'name'=>'admin/system/index',
                'title'=>'系统配置',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>0,
                'pid'=>5,
                'level'=>3,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>7,
                'name'=>'admin/system/setconfig',
                'title'=>'网站配置',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>6,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>8,
                'name'=>'admin/system/configlist',
                'title'=>'配置列表',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>3,
                'pid'=>6,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>11,
                'name'=>'admin/member/userList',
                'title'=>'会员列表',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>12,
                'name'=>'admin/access',
                'title'=>'权限',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>99,
                'pid'=>1,
                'level'=>2,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>13,
                'name'=>'admin/access/index',
                'title'=>'权限管理',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>0,
                'pid'=>12,
                'level'=>3,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>14,
                'name'=>'admin/access/manager/index',
                'title'=>'管理列表',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>37,
                'name'=>'admin/access/manager/add',
                'title'=>'添加管理',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>38,
                'name'=>'admin/access/manager/edit',
                'title'=>'编辑管理',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>39,
                'name'=>'admin/access/manager/delete',
                'title'=>'删除管理',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>1,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>15,
                'name'=>'admin/access/rolelist',
                'title'=>'角色管理',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>4,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>16,
                'name'=>'admin/access/nodelist',
                'title'=>'节点列表',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>8,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME']
            ],
            [
                'id'=>17,
                'name'=>'admin/system/saveallconfig',
                'title'=>'提交设置',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>2,
                'pid'=>6,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>18,
                'name'=>'admin/system/addconfig',
                'title'=>'新增配置',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>4,
                'pid'=>6,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>19,
                'name'=>'admin/system/editconfig',
                'title'=>'修改配置',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>5,
                'pid'=>6,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>20,
                'name'=>'admin/system/delconfig',
                'title'=>'删除配置',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>6,
                'pid'=>6,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>21,
                'name'=>'admin/member/useradd',
                'title'=>'新增用户',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>2,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>22,
                'name'=>'admin/member/useredit',
                'title'=>'编辑用户',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>3,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>23,
                'name'=>'admin/member/groupauth',
                'title'=>'授权用户',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>4,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>24,
                'name'=>'admin/member/deluser',
                'title'=>'删除用户',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>6,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>25,
                'name'=>'admin/access/deluser',
                'title'=>'删除管理',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>3,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>26,
                'name'=>'admin/access/addrole',
                'title'=>'新增角色',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>5,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>27,
                'name'=>'admin/access/disabledrole',
                'title'=>'禁用角色',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>6,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>28,
                'name'=>'admin/access/delrole',
                'title'=>'删除角色',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>7,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>29,
                'name'=>'admin/access/add',
                'title'=>'新增节点',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>9,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>30,
                'name'=>'admin/access/del',
                'title'=>'删除节点',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>10,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>31,
                'name'=>'admin/access/setstatus',
                'title'=>'禁用节点',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>11,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>32,
                'name'=>'admin/access/edit',
                'title'=>'编辑节点',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>12,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>33,
                'name'=>'admin/access/delnode',
                'title'=>'删除节点',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>13,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>34,
                'name'=>'admin/access/authrole',
                'title'=>'角色授权',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>5,
                'pid'=>13,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>35,
                'name'=>'admin/member/disableduser',
                'title'=>'拉黑用户',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>3,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>36,
                'name'=>'admin/member/expmember',
                'title'=>'导出用户',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>7,
                'pid'=>10,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ],
            [
                'id'=>40,
                'name'=>'admin/file/upload',
                'title'=>'上传文件',
                'type'=>1,
                'node_icon'=>'',
                'class_icon'=>'',
                'status'=>1,
                'condition'=>'',
                'sort'=>100,
                'pid'=>1,
                'level'=>4,
                'create_time'=>$_SERVER['REQUEST_TIME'],
                'is_display'=>0
            ]
        ]);
        $table->save();
    }
}
